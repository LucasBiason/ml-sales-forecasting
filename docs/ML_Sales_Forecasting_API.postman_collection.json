{
  "info": {
    "_postman_id": "ml-sales-api-v1",
    "name": "ML Sales Forecasting API",
    "description": "# ML Sales Forecasting API\n\nUK Property Price Prediction using Random Forest.\n\n## Model Performance\n- **R² General:** 11.16%\n- **R² <£1M:** 27% (98.6% of properties)\n- **MAE:** £86,796\n- **Training Samples:** 99,831\n\n## Base URL\n`http://localhost:8000`\n\n## Endpoints\n1. `/` and `/health` - Health check\n2. `/api/v1/model/info` - Model metadata\n3. `/api/v1/predict` - Price prediction\n\n## Import\n1. Postman → Import → File\n2. Select this JSON\n3. All endpoints ready with examples",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/",
          "host": ["{{base_url}}"],
          "path": [""]
        },
        "description": "### Health Check\n\nAvailable at both `/` and `/health` with identical responses.\n\n**Response Fields:**\n- `status`: Service status (\"healthy\")\n- `timestamp`: ISO 8601 datetime\n- `model_loaded`: ML model state (true/false)\n- `version`: API version (1.0.0)\n\n**Use Case:** Monitoring, load balancer probes, readiness checks"
      },
      "response": [
        {
          "name": "200 OK - Model Loaded",
          "originalRequest": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/", "host": ["{{base_url}}"], "path": [""]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"status\": \"healthy\",\n    \"timestamp\": \"2025-10-29T10:23:34.730372\",\n    \"model_loaded\": true,\n    \"version\": \"1.0.0\"\n}"
        }
      ]
    },
    {
      "name": "Model Information",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/v1/model/info",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "model", "info"]
        },
        "description": "### Model Metadata\n\nDetailed information about the Random Forest model.\n\n**Response Fields:**\n- `loaded`: Model state\n- `model_type`: RandomForestRegressor\n- `n_estimators`: 100 trees\n- `features`: 6 feature names\n- `training_samples`: 99,831\n- `cv_r2_mean`: 0.439 (log scale)\n- `expected_r2`: 0.1116 (11.16% in original scale)\n- `trained_date`: Training timestamp\n\n**Use Case:** Model monitoring, debugging, version verification"
      },
      "response": [
        {
          "name": "200 OK - Model Loaded",
          "originalRequest": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/api/v1/model/info", "host": ["{{base_url}}"], "path": ["api", "v1", "model", "info"]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"loaded\": true,\n    \"model_type\": \"RandomForestRegressor\",\n    \"n_estimators\": 100,\n    \"features\": [\n        \"property_type_enc\",\n        \"county_enc\",\n        \"postcode_region_enc\",\n        \"old_new_enc\",\n        \"duration_enc\",\n        \"year\"\n    ],\n    \"training_samples\": 99831,\n    \"cv_r2_mean\": 0.43903378976114366,\n    \"expected_r2\": 0.1116,\n    \"trained_date\": \"2025-10-28T20:09:54.055543\"\n}"
        },
        {
          "name": "200 OK - Model Not Loaded",
          "originalRequest": {
            "method": "GET",
            "url": {"raw": "{{base_url}}/api/v1/model/info", "host": ["{{base_url}}"], "path": ["api", "v1", "model", "info"]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"loaded\": false\n}"
        }
      ]
    },
    {
      "name": "Predict Property Price",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}",
          "options": {"raw": {"language": "json"}}
        },
        "url": {
          "raw": "{{base_url}}/api/v1/predict",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "predict"]
        },
        "description": "### Predict Property Price\n\n**Required Fields:**\n- `property_type`: D=Detached, S=Semi, T=Terraced, F=Flat, O=Other\n- `old_new`: Y=New, N=Existing\n- `duration`: F=Freehold, L=Leasehold, U=Unknown\n- `county`: UK county (2-50 chars, auto-uppercase)\n- `postcode`: UK postcode (5-10 chars, auto-uppercase)\n- `year`: 1995-2030\n\n**Response:**\n- `predicted_price`: Price in £\n- `confidence_interval`: min/max range (10th-90th percentile)\n- `features_used`: 6 features\n- `model_info`: Model metadata\n\n**Examples:** See saved responses for success cases (London, Surrey, Manchester) and validation errors"
      },
      "response": [
        {
          "name": "SUCCESS - Terraced in London (£350k)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"predicted_price\": 350267.88,\n    \"confidence_interval\": {\n        \"min\": 316447.07,\n        \"max\": 400000.0\n    },\n    \"features_used\": [\n        \"property_type_enc\",\n        \"county_enc\",\n        \"postcode_region_enc\",\n        \"old_new_enc\",\n        \"duration_enc\",\n        \"year\"\n    ],\n    \"model_info\": {\n        \"type\": \"RandomForest\",\n        \"n_estimators\": 100,\n        \"expected_r2\": 0.1116\n    }\n}"
        },
        {
          "name": "SUCCESS - Detached in Surrey (£1.06M)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"D\",\n  \"old_new\": \"Y\",\n  \"duration\": \"F\",\n  \"county\": \"SURREY\",\n  \"postcode\": \"GU1 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"predicted_price\": 1061889.77,\n    \"confidence_interval\": {\n        \"min\": 479999.5,\n        \"max\": 2322500.0\n    },\n    \"features_used\": [\n        \"property_type_enc\",\n        \"county_enc\",\n        \"postcode_region_enc\",\n        \"old_new_enc\",\n        \"duration_enc\",\n        \"year\"\n    ],\n    \"model_info\": {\n        \"type\": \"RandomForest\",\n        \"n_estimators\": 100,\n        \"expected_r2\": 0.1116\n    }\n}"
        },
        {
          "name": "SUCCESS - Flat in Manchester (£236k)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"F\",\n  \"old_new\": \"N\",\n  \"duration\": \"L\",\n  \"county\": \"GREATER MANCHESTER\",\n  \"postcode\": \"M1 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"predicted_price\": 236572.01,\n    \"confidence_interval\": {\n        \"min\": 230000.0,\n        \"max\": 245000.0\n    },\n    \"features_used\": [\n        \"property_type_enc\",\n        \"county_enc\",\n        \"postcode_region_enc\",\n        \"old_new_enc\",\n        \"duration_enc\",\n        \"year\"\n    ],\n    \"model_info\": {\n        \"type\": \"RandomForest\",\n        \"n_estimators\": 100,\n        \"expected_r2\": 0.1116\n    }\n}"
        },
        {
          "name": "ERROR - Invalid property_type (X)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"X\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"string_pattern_mismatch\",\n            \"loc\": [\"body\", \"property_type\"],\n            \"msg\": \"String should match pattern '^[DSTFO]$'\",\n            \"input\": \"X\",\n            \"ctx\": {\"pattern\": \"^[DSTFO]$\"}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Missing county and postcode",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"missing\",\n            \"loc\": [\"body\", \"county\"],\n            \"msg\": \"Field required\",\n            \"input\": {\"property_type\": \"T\", \"old_new\": \"N\", \"duration\": \"F\", \"year\": 2024}\n        },\n        {\n            \"type\": \"missing\",\n            \"loc\": [\"body\", \"postcode\"],\n            \"msg\": \"Field required\",\n            \"input\": {\"property_type\": \"T\", \"old_new\": \"N\", \"duration\": \"F\", \"year\": 2024}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Year too early (1990)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 1990\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"greater_than_equal\",\n            \"loc\": [\"body\", \"year\"],\n            \"msg\": \"Input should be greater than or equal to 1995\",\n            \"input\": 1990,\n            \"ctx\": {\"ge\": 1995}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Year too late (2035)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2035\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"less_than_equal\",\n            \"loc\": [\"body\", \"year\"],\n            \"msg\": \"Input should be less than or equal to 2030\",\n            \"input\": 2035,\n            \"ctx\": {\"le\": 2030}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Invalid old_new (X)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"X\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"string_pattern_mismatch\",\n            \"loc\": [\"body\", \"old_new\"],\n            \"msg\": \"String should match pattern '^[YN]$'\",\n            \"input\": \"X\",\n            \"ctx\": {\"pattern\": \"^[YN]$\"}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Invalid duration (X)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"X\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"string_pattern_mismatch\",\n            \"loc\": [\"body\", \"duration\"],\n            \"msg\": \"String should match pattern '^[FLU]$'\",\n            \"input\": \"X\",\n            \"ctx\": {\"pattern\": \"^[FLU]$\"}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - Postcode too short (SW1)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"GREATER LONDON\",\n  \"postcode\": \"SW1\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"string_too_short\",\n            \"loc\": [\"body\", \"postcode\"],\n            \"msg\": \"String should have at least 5 characters\",\n            \"input\": \"SW1\",\n            \"ctx\": {\"min_length\": 5}\n        }\n    ]\n}"
        },
        {
          "name": "ERROR - County too short (L)",
          "originalRequest": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"property_type\": \"T\",\n  \"old_new\": \"N\",\n  \"duration\": \"F\",\n  \"county\": \"L\",\n  \"postcode\": \"SW1A 1AA\",\n  \"year\": 2024\n}"
            },
            "url": {"raw": "{{base_url}}/api/v1/predict", "host": ["{{base_url}}"], "path": ["api", "v1", "predict"]}
          },
          "status": "Unprocessable Entity",
          "code": 422,
          "_postman_previewlanguage": "json",
          "header": [{"key": "Content-Type", "value": "application/json"}],
          "body": "{\n    \"detail\": [\n        {\n            \"type\": \"string_too_short\",\n            \"loc\": [\"body\", \"county\"],\n            \"msg\": \"String should have at least 2 characters\",\n            \"input\": \"L\",\n            \"ctx\": {\"min_length\": 2}\n        }\n    ]\n}"
        }
      ]
    }
  ]
}
